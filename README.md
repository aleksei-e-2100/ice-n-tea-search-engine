# iCE && tEA Search Engine

## Аннотация
iCE && tEA Search Engine - поисковый движок для корпоративного портала компании - аналог поисковой строки Яндекса или Google.
Работает по следующим принципам:
1. Перед запуском в конфигурационном файле config.json задаются названия файлов, по которым движок будет осуществлять поиск.
2. Движок самостоятельно обходит заданные файлы и индексирует их так, что по любому поисковому запросу можно найти наиболее релевантные документы.
3. Запросы задаются через JSON-файл requests.json. Запрос — это набор слов, по которым нужно найти документы.
4. Запрос трансформируется в список слов. Движок находит в индексе те документы, в которых встречаются указанные слова.
5. Результаты поиска ранжируются, сортируются и записываются в JSON-файл answers.json.

## Использование движка
Файлы настроек и запросов (config.json и requests.json) должны находиться в той же директории, что и exe-файл с движком. Без них запуск движка невозможен.
Указанные файлы должны иметь корректное содержимое, которое проверяется при запуске движка.
#### В файле config.json:
- должны быть обязательные ключи "config" с настройками движка, и "files" со списком файлов, в которых будет осуществляться поиск;
- должна быть указана версия файла конфигурации (ключ "version"). Движок не запустится, если версия файла конфигурации не указана или отличается от версии движка;
- могут быть опциональные настройки: "name" (название движка) и "max_responses" (максимальное количество ответов на один запрос).
  Опционально указанное название движка будет выводиться в консоль при его старте. Если оно не указано, то будет выводиться название по умолчанию.
  Если не указано максимальное количество ответов на запрос, то движок по умолчанию будет выдавать 5 (пять) наиболее релевантных ответов.
- список файлов для поиска следует указывать в кавычках (в текстовом формате). Поиск будет осуществляться по всем перечисленным файлам. Если какой-то файл отсутствует или его не удается открыть, движок выдаст соответствующее сообщение.
#### В файле requests.json:
- должны быть указаны поисковые запросы, которые будет обрабатывать движок.

## Примеры настроек и результатов поиска:
Образцы файлов config.json и requests.json представлены в директории release. Примеры текстовых файлов для поиска представлены в директории release/text_files.

#### Файл answers.json:
Файл answers.json с примером результатов поиска представлен в директории release: 
- ключ "request00X" в этом файле указывает на порядковый номер запроса (порядок запросов соответствует файлу requests.json);
- ключ "result" принимает значение true, если запрос дал результат, или значение false, если по запросу в списке файлов ничего не найдено. Пустые запросы тоже выдают значение false;
- ключ "doc_id" указывает порядковый номер документа, в котором найден ответ на запрос (порядок документов соответствует файлу config.json, документы нумеруются, начиная с нуля);
- ключ "rank" указывает релевантность документа. Если найдено несколько документов, соответствующих запросу, документы перечисляются по убыванию релевантности.

## Ограничения:
На данный момент движок имеет следующие ограничения, которые продиктованы целями, для которых он создавался:
- движок предназначен для работы только с текстовыми файлами (например, txt). Поиск в файлах Word и т.п. осуществляться не будет;
- движок является регистрозависимым, т.е. находит только те слова в заданных файлах, которые записаны в том же буквенном регистре, что и сам запрос;
- не рекомендуется использовать движок в текстовых файлах, объем которых превышает 1000 слов, либо длина отдельного слова в которых превышает 100 символов;
- не рекомендуется для одного поиска задавать более 1000 запросов (в файле requests.json).

## Технологии
Движок написан на C++ с использованием STL-контейнеров. 
Индексация файлов осуществляется многопоточно.
Также использованы сторонние библиотеки: 
- JSON for Modern C++ (https://github.com/nlohmann/json) для работы с файлами JSON;
- GoogleTest (https://github.com/google/googletest) для unit-тестирования.

## Сборка и запуск
Для сборки необходим CMAKE. Рекомендуется использовать компилятор MinGW. Если склонирован репозиторий и в файлы CMakeLists.txt не вносились изменения, бинарный файл (SearchEngine.exe) будет создан в директории release.
